<div id="{{ page_vars['carousel_id'] }}" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-indicators">

    <button type="button" data-bs-target="#{{ page_vars['carousel_id'] }}" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 0"></button>
  {% for image_path in page_vars['image_paths'][1:] %}
    <button type="button" data-bs-target="#{{ page_vars['carousel_id'] }}" data-bs-slide-to="{{ loop.index }}" aria-label="Slide {{ loop.index }}"></button>
  {% endfor %}
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="{{ url_for('static', filename=page_vars['image_paths'][0]) }}" class="d-block w-40" height="400" alt="...">
      <div class="carousel-caption d-none d-md-block">
        <h5>Image 1</h5>
        <p>Click to access to statistics</p>
      </div>
    </div>
    {% for image_path in page_vars['image_paths'][1:] %}
    <div class="carousel-item">
      <img src="{{ url_for('static', filename=image_path) }}" class="d-block w-40" height="400" alt="...">
      <div class="carousel-caption d-none d-md-block">
        <h5>Image {{ loop.index+1 }}</h5>
        <p>Click to access to statistics</p>
      </div>

    </div>
    {% endfor %}

  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#{{ page_vars['carousel_id'] }}" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#{{ page_vars['carousel_id'] }}" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<script  type="text/javascript">
// Not needed for now, and will cause problem is multiple carousels are used on same document
// as they will have the same id: carousel_id
const carousel_id = {{ page_vars['carousel_id']|tojson }};
console.log("Carousel id:"+carousel_id);

// bind a click event to each carousel item (needs Ajax import in header to use JQuery)
{% for slide in page_vars['carousel_slides'] %}
$(document.getElementById("{{ slide['slide_name'] }}")).on("click", 
        document.getElementById("#{{ slide['slide_name'] }}") , 
        function(event){
                console.log("Carousel item:"+"{{ slide['slide_name'] }}"+" has been clicked");
                $(location).attr('href', '../hp_issue_'+"{{ slide['slide_name'] }}");
                        }); 
{% endfor %}



</script>
